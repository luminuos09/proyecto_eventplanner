<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<!--
    Vista para cancelar la inscripci贸n de un participante a un evento
    Controlador: CancelarInscripcionController
    
    Estructura:
    - Panel superior: B煤squeda de participante (ID o Email)
    - Panel central: Tabla de eventos donde est谩 inscrito
    - Panel inferior: Bot贸n para cancelar y volver
-->

<VBox xmlns="http://javafx.com/javafx/17" 
      xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="presentacion.controllers.CancelarInscripcionController"
      spacing="20" 
      style="-fx-background-color: #f5f5f5;"
      prefWidth="900" 
      prefHeight="700">
    
    <padding>
        <Insets top="20" right="30" bottom="20" left="30"/>
    </padding>
    
    <!-- ========== ENCABEZADO ========== -->
    <HBox alignment="CENTER" style="-fx-background-color: #7C3AED; -fx-background-radius: 10;">
        <padding>
            <Insets top="20" right="20" bottom="20" left="20"/>
        </padding>
        <VBox alignment="CENTER" spacing="5">
            <Label text="Cancelar Inscripci贸n" 
                   style="-fx-text-fill: white; -fx-font-size: 28px; -fx-font-weight: bold;"/>
            <Label text="Dar de baja a un participante de un evento" 
                   style="-fx-text-fill: #e0e0e0; -fx-font-size: 14px;"/>
        </VBox>
    </HBox>
    
    <!-- ========== PANEL DE BSQUEDA ========== -->
    <VBox spacing="15" 
          style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
        <padding>
            <Insets top="20" right="20" bottom="20" left="20"/>
        </padding>
        
        <Label text="Buscar Participante" 
               style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #7b2cbf;"/>
        
        <!-- B煤squeda por ID -->
        <HBox spacing="10" alignment="CENTER_LEFT">
            <Label text="ID Participante:" 
                   style="-fx-font-size: 14px; -fx-font-weight: bold;"
                   minWidth="120"/>
            <TextField fx:id="txtIdParticipante" 
                      promptText="Ej: PART001" 
                      prefWidth="250"
                      style="-fx-font-size: 13px;"/>
            <Button text="Buscar por ID" 
                   onAction="#buscarPorId"
                   style="-fx-background-color: #7C3AED; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;"
                   prefWidth="130"/>
        </HBox>
        
        <Separator/>
        
        <!-- B煤squeda por Email -->
        <HBox spacing="10" alignment="CENTER_LEFT">
            <Label text="Email:" 
                   style="-fx-font-size: 14px; -fx-font-weight: bold;"
                   minWidth="120"/>
            <TextField fx:id="txtEmailParticipante" 
                      promptText="Ej: juan@ejemplo.com" 
                      prefWidth="250"
                      style="-fx-font-size: 13px;"/>
            <Button text="Buscar por Email" 
                   onAction="#buscarPorEmail"
                   style="-fx-background-color: #7C3AED; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;"
                   prefWidth="130"/>
        </HBox>
        
        <!-- Nombre del participante encontrado -->
        <HBox spacing="10" alignment="CENTER_LEFT">
            <Label text="Participante:" 
                   style="-fx-font-size: 14px; -fx-font-weight: bold;"
                   minWidth="120"/>
            <Label fx:id="lblNombreParticipante" 
                   text="" 
                   style="-fx-font-size: 16px; -fx-text-fill: #2e7d32; -fx-font-weight: bold;"/>
        </HBox>
    </VBox>
    
    <!-- ========== TABLA DE EVENTOS ========== -->
    <VBox spacing="10" 
          style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);"
          VBox.vgrow="ALWAYS">
        <padding>
            <Insets top="15" right="15" bottom="15" left="15"/>
        </padding>
        
        <Label text="Eventos Inscritos" 
               style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #7b2cbf;"/>
        
        <Label text="Seleccione un evento de la tabla para cancelar la inscripci贸n" 
               style="-fx-font-size: 12px; -fx-text-fill: #666666;"/>
        
        <TableView fx:id="tablaEventos" 
                   VBox.vgrow="ALWAYS"
                   style="-fx-background-color: white;">
            <columns>
                <TableColumn fx:id="colId" 
                           text="ID" 
                           prefWidth="100"
                           style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colNombre" 
                           text="Nombre del Evento" 
                           prefWidth="280"/>
                <TableColumn fx:id="colFecha" 
                           text="Fecha" 
                           prefWidth="150"
                           style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colTipo" 
                           text="Tipo" 
                           prefWidth="130"
                           style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colEstado" 
                           text="Estado" 
                           prefWidth="120"
                           style="-fx-alignment: CENTER;"/>
            </columns>
            
            <!-- Placeholder cuando no hay datos -->
            <placeholder>
                <Label text="No hay eventos para mostrar. Busque un participante primero." 
                       style="-fx-text-fill: #999999;"/>
            </placeholder>
        </TableView>
    </VBox>
    
    <!-- ========== BOTONES DE ACCIN ========== -->
    <HBox spacing="15" alignment="CENTER">
        <Button fx:id="btnCancelar"
                text="Cancelar Inscripci贸n" 
                onAction="#cancelarInscripcion"
                disable="true"
                style="-fx-background-color: #7C3AED; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-cursor: hand; -fx-padding: 12 30 12 30;"
                minWidth="200"/>
        
        <Button text="Limpiar" 
                onAction="#limpiarFormulario"
                style="-fx-background-color: #7C3AED; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-cursor: hand; -fx-padding: 12 30 12 30;"
                minWidth="200"/>
        
        <Button text="Volver" 
                onAction="#volverMenuParticipantes"
                style="-fx-background-color: #7C3AED; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-cursor: hand; -fx-padding: 12 30 12 30;"
                minWidth="200"/>
    </HBox>
    
</VBox>
